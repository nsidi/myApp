<!doctype HTML>
<html>
<head>
<meta charset="utf-8">
<title>Page Five</title>

<script src="https://code.createjs.com/createjs-2015.11.26.min.js"></script>
<script>var zon = true; // true for comments from zim code</script>
<script src="https://d309knd7es5f10.cloudfront.net/zim_4.3.1.js"></script>

<!-- physics libraries -->
<script src="https://d309knd7es5f10.cloudfront.net/Box2dWeb-2.1.a.3.min.js"></script>
<script src="../../_js/physics_0.1.2.js"></script><!-- helper code for box2D -->


<script>

var frame = new zim.Frame("fit", 1024, 768, "#231F20");
frame.on("ready", function() {
	zog("ready from ZIM Frame");

	var stage = frame.stage;
	var stageW = frame.width;
	var stageH = frame.height;
 
    var assetPath = "_assets/";
	frame.loadAssets(["background.png", "moon.png", "fullmoon.png", "moon.mp3", "buddy.png", "boing.mp3"], assetPath);
	frame.on("complete", function() {
        
        // Set background to an image
        var background = frame.asset("background.png");
		background.scale(1).centerReg(stage);
        
       
        zim.OPTIMIZE = true;
	    zim.Ticker.update = true;

		// Borders for the world
		var borders = {x:0, y:0, width:stageW, height:stageH};

        
		// New Physics object passing in the ZIM frame and borders
		var physics = new zim.Physics(frame, borders);

       
       
       
        var topBarW = 300;
        var topBarH = 30;
        
        var bottomBarW = 300;
        var bottomBarH = 30;     
        
        var leftBarW = 290;
        var leftBarH = 30;
        
        var rightBarW = 310;
        var rightBarH = 30;    
            
        var moonW = 120;
		var moonH = 180;
        
        
        
        
        
        
        var topBarBody = physics.makeRectangle(topBarW, topBarH, false);
        topBarBody.x = 150;
	    topBarBody.y = 10;
//        topBarBody.rotation = -35;
        
        var bottomBarBody = physics.makeRectangle(bottomBarW, bottomBarH, false);
        bottomBarBody.x = 150;
	    bottomBarBody.y = 230;
//        bottomBarBody.rotation = -35;
        
        var leftBarBody = physics.makeRectangle(leftBarW, leftBarH, false);
        leftBarBody.x = 50;
	    leftBarBody.y = 80;
        leftBarBody.rotation = -90;
        
        var rightBarBody = physics.makeRectangle(rightBarW, rightBarH, false);
        rightBarBody.x = 220;
	    rightBarBody.y = 80;
        rightBarBody.rotation = -90;
        
        var moonBody = physics.makeRectangle(moonW, moonH, true, .2);
        moonBody.x = 150;
        moonBody.y = 20;
//        moonBody.rotation = 35;
        physics.drag([moonBody]);
        
        
//		 FOR DEBUGGING
//        		 physics.debug();
//        		 frame.on("resize", function() {
//        		 physics.updateDebug();
//        		 });
	  
        
          
        var moon = frame.asset("moon.png");
        stage.addChild(moon);
        moon.centerReg(stage);
        moon.x=130;
        moon.y=120;
//        .width=100;
        moon.alpha=1;
       
        
         physics.addMap(moonBody, moon);
      
        //Title
        var label = new zim.Label({
           text:"She was welcomed by a friendly alien named, Buddy. “Hi there! Welcome to Planet Wonderful.”",
            size:21,
           lineWidth:760,
           lineHeight:35,
           font:"Helvetica Neue",
           color:"black"
        });
        stage.addChild(label);
        label.x = 157;
        label.y = 635;
        
        function moonVoice(){
            frame.asset("moon.mp3").play();
        }
        
      
        
        var fullmoon;
        moon.on ("click", function() {
        fullmoon=frame.asset("fullmoon.png");
            moonVoice();
            stage.removeChild(moon);
            fullmoon=frame.asset("fullmoon.png");
            stage.addChild(fullmoon);
            physics.addMap(moonBody, fullmoon);
            fullmoon.centerReg(stage);
            fullmoon.x=130;
            fullmoon.y=120;
        fullmoon.animate({
            obj:{rotation:0.5, scale:1, alpha: 1},
            rewind:true,
            time:1000,
            loop:true,
            from:true
        });
        });
        
       
        var buddy = frame.asset("buddy.png");
        stage.addChild(buddy);
        buddy.centerReg(stage);
        buddy.x=520;
        buddy.y=350;
        buddy.alpha=1;
        
        var button = new zim.Button(150, 30, "");
        stage.addChild(button);
	    button.x = 880;
        button.y = 555;
        button.alpha=0.1;
        
        button.on("click", function() {
            frame.asset("boing.mp3").play();
		buddy.move({
			y:buddy.y-200,
			time:200,
			ease:"quadOut",
			rewind:true
		});
	});
        
        
         var button2 = new zim.Button(100, 30, "");
        stage.addChild(button2);
	    button2.x = 840;
        button2.y = 480;
        button2.alpha=0.1;
        
        button2.on("click", function() {
            frame.asset("boing.mp3").play();
		buddy.move({
			y:buddy.y-200,
			time:200,
			ease:"quadOut",
			rewind:true
		});
	});
        
        
         var button3 = new zim.Button(100, 30, "");
        stage.addChild(button3);
	    button3.x = 410;
        button3.y = 550;
        button3.alpha=.1;
        
        button3.on("click", function() {
            frame.asset("boing.mp3").play();
		buddy.move({
			y:buddy.y-200,
			time:200,
			ease:"quadOut",
			rewind:true
		});
	});
        
         var button4 = new zim.Button(60, 40, "");
        stage.addChild(button4);
	    button4.x = 140;
        button4.y = 520;
        button4.alpha=.1;
        
        button4.on("click", function() {
            frame.asset("boing.mp3").play();
		buddy.move({
			y:buddy.y-200,
			time:200,
			ease:"quadOut",
			rewind:true
		});
	});
        
        var button5 = new zim.Button(100, 30, "");
        stage.addChild(button5);
	    button5.x = 40;
        button5.y = 460;
        button5.alpha=.1;
        
        button5.on("click", function() {
            frame.asset("boing.mp3").play();
		buddy.move({
			y:buddy.y-200,
			time:200,
			ease:"quadOut",
			rewind:true
		});
	});
        

        buddy.on("click", function() {
            frame.asset("boing.mp3").play();
            buddy.animate({
                obj:{y:buddy.y-200},
                time:200,
                ease:"quadOut",
                rewind:true
            });
            buddy.animate({
                obj:{rotation:360},
                time:400,
                call:function(){
                    buddy.rotation=0;
                   
                },
                override:false // override defaults to true which would stop the earlier animation
            });
        });

    
        
        
        
        
        
        var back=new zim.Rectangle(30, 30, "#F2F2F2");
        back.centerReg(stage);
        back.alpha=.01;
        back.x=15;
        back.y=752;
        back.cursor = "pointer";
        back.addEventListener("click", function(){zgo("../four/four.html");});
        
        var next=new zim.Rectangle(65, 65, "#F2F2F2");
        next.centerReg(stage);
        next.alpha=0.01;
        next.x=992;
        next.y=738;
        next.cursor = "pointer";
        next.addEventListener("click", function(){zgo("../six/six.html");});
        
        
        
        
        
        

        
                
        stage.update();
	  });
		
})
	

</script>
    
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimal-ui" />

</head>

<body>
</body>
</html>
